### Module: `Exits`

- **ID:** `exits`
- **Purpose:** Displays a comprehensive list of all region exits (transitions between regions) in the game, showing their real-time accessibility status and the logic required to traverse them.

---

#### Key Files

- `frontend/modules/exits/index.js`: The module's entry point for registration.
- `frontend/modules/exits/exitUI.js`: The UI class that renders the panel, including the grid of exit cards and their associated logic trees.

#### Responsibilities

- **Render All Exits:** Fetches the complete list of exits from the `StateManager`'s static data and displays each one as an interactive card.
- **Display Exit Information:** For each exit, it clearly shows the source region, the exit's name, and the destination region.
- **Show Accessibility Status:** The primary function is to visually indicate the current status of each exit. It uses color-coding to show whether an exit is currently traversable (green), blocked by rules or region inaccessibility (red/orange), or in an unknown state.
- **Visualize Rules:** For each exit, it renders a detailed logic tree for its `access_rule`, showing exactly which conditions (items, helpers, etc.) are met or unmet based on the player's current inventory.
- **Filtering and Sorting:** Provides UI controls to sort the list of exits (e.g., by name or accessibility) and filter them based on their status.
- **Loop Mode Interaction:** When in "Archipelago Loops" mode, clicking an accessible exit card will queue a "Move" action in the `LoopState`, allowing the player to automate navigation.

#### Events Published

- `ui:navigateToRegion`: This event is published indirectly when a user clicks on a region name link (generated by `commonUI`) within an exit card, allowing for quick navigation in the UI.

#### Events Subscribed To

- `app:readyForUiDataLoad`: Listens for this to perform initial setup that doesn't depend on game state.
- `stateManager:rulesLoaded`: Triggered when a new `rules.json` is loaded. The `ExitUI` uses this event to get the complete, static list of all exits for the new game.
- `stateManager:snapshotUpdated`: This is the primary event the module listens to. On every state change, it receives the new snapshot and completely re-evaluates and re-renders the accessibility status of all exits.
- `loop:modeChanged` & `loop:discoveryChanged`: When in Loops mode, these events trigger a re-render to update the UI based on which exits have been "discovered".
- `settings:changed`: Listens for changes to settings, particularly `colorblindMode`, to update its display accordingly.

#### Public Functions (`centralRegistry`)

This module does not register any public functions.

#### Dependencies & Interactions

- **StateManager**: The `Exits` module is fundamentally dependent on the `StateManager`. It gets the static list of all exits from the `staticDataCache` and uses the `createStateSnapshotInterface` method on the proxy to evaluate the `access_rule` for every exit during each render cycle.
- **CommonUI**: It makes extensive use of `commonUI.renderLogicTree` to display the accessibility rules and `commonUI.createRegionLink` to create clickable links for the source and destination regions.
- **LoopState**: In Loop Mode, the UI queries `loopStateSingleton` to determine if an exit has been discovered and queues actions to it upon user interaction.
