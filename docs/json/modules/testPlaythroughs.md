### Module: `Test Playthroughs`

- **ID:** `testPlaythroughs`
- **Purpose:** A developer-focused testing tool for replaying a game's progression event-by-event. It validates the `StateManager`'s behavior against a detailed log generated by the Python client, ensuring that the frontend's state calculations match the backend's at every step of a playthrough.

---

#### Key Files

- `frontend/modules/testPlaythroughs/index.js`: The module's entry point for registration.
- `frontend/modules/testPlaythroughs/testPlaythroughUI.js`: The UI class that renders the panel for selecting and stepping through playthroughs.
- `frontend/playthroughs/`: The directory containing the JSON log files (`.jsonl`) that this module consumes.

#### Responsibilities

- **Discover Playthroughs:** On initialization, it fetches `frontend/playthroughs/playthrough_files.json`, which acts as an index of all available playthrough logs.
- **Load Playthrough Data:** When a user selects a playthrough, it loads two files:
  1.  The corresponding game preset (`rules.json`) to configure the `StateManager` with the correct world logic.
  2.  The playthrough log file (`.jsonl`), which contains a sequence of events (e.g., `initial_state`, `checked_location`, `state_update`).
- **Simulate Playthrough:** Provides "Run Full Test" and "Step Test" buttons to process the log file.
  - For each `checked_location` event in the log, it commands the `StateManager` to check that location and grant the item.
  - For each `state_update` event, it performs a validation step.
- **State Validation:** The core function of this module. After each event, it compares the current set of accessible locations calculated by the frontend `StateManager` against the list of accessible locations recorded in the Python log for that same step.
- **Display Results:** It provides a detailed, step-by-step log in its UI panel, reporting the success of each action and highlighting any **mismatches** between the frontend state and the Python log.

#### Events Published

- `files:jsonLoaded`: Publishes the content of the preset `rules.json` file to be loaded by the `StateManager`.
- `ui:notification`: Publishes success or error messages to the user.

#### Events Subscribed To

This module does not subscribe to global events for its core functionality, as it drives the state changes itself during a test run. It relies on `app:readyForUiDataLoad` to trigger its initial fetch of the playthrough index.

#### Public Functions (`centralRegistry`)

This module does not register any public functions.

#### Dependencies & Interactions

- **StateManager**: The module uses the `StateManager` as its test subject. It loads a specific ruleset into the worker, then sequentially sends commands (`checkLocation`, `addItemToInventory`) and queries the resulting state snapshot to perform its validation.
- **Python Client Logging:** It is fundamentally dependent on the (currently unimplemented) feature of the Python client to generate the detailed `.jsonl` playthrough logs. Without these logs, the module has no data to run.
- **Presets Module**: It indirectly depends on the same `presets/` directory structure to find the `rules.json` file associated with a given playthrough log.
